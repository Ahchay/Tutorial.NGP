// Exported by NeoTile

const unsigned char SineTable[128] = {
64,66,68,71,73,75,77,79,81,82,84,85,86,87,87,87,87,87,87,86,85,84,83,81,80,78,76,74,72,69,67,64,
62,60,57,55,53,51,49,47,45,44,43,42,41,40,40,40,40,40,40,41,42,44,45,47,48,50,52,55,57,59,62,64,
66,69,71,73,75,77,79,81,83,84,85,86,87,87,87,87,87,87,86,85,84,83,81,79,78,76,73,71,69,66,64,62,
59,57,55,53,50,48,47,45,44,42,41,41,40,40,40,40,40,41,41,42,44,45,47,49,51,53,55,57,60,62,64,67
};

const unsigned short tutorial[18][8] = {
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000}, //TileNull
	{0x006d, 0x006d, 0x006d, 0x006d, 0x006d, 0x006d, 0x006d, 0x006d}, //Left
	{0x0000, 0x0000, 0x0000, 0x0000, 0x5555, 0xaaaa, 0xffff, 0x5555}, //Top
	{0x7900, 0x7900, 0x7900, 0x7900, 0x7900, 0x7900, 0x7900, 0x7900}, //Right
	{0x5555, 0xffff, 0xaaaa, 0x5555, 0x0000, 0x0000, 0x0000, 0x0000}, //Bottom
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0005, 0x001a, 0x006f, 0x006d}, //Top Left
	{0x0000, 0x0000, 0x0000, 0x0000, 0x5000, 0xa400, 0xf900, 0x7900}, //Top Right
	{0x7900, 0xf900, 0xa400, 0x5000, 0x0000, 0x0000, 0x0000, 0x0000}, //Bottom Right
	{0x006d, 0x006f, 0x001a, 0x0005, 0x0000, 0x0000, 0x0000, 0x0000}, //Bottom Left
	{0x1555, 0x7fff, 0x7eaa, 0x7a55, 0x7900, 0x7900, 0x7900, 0x7900}, //Outside Top Left
	{0x5554, 0xfffd, 0xaabd, 0x55ad, 0x006d, 0x006d, 0x006d, 0x006d}, //Outside Top Right
	{0x7900, 0x7900, 0x7900, 0x7900, 0x7a55, 0x7eaa, 0x7fff, 0x1555}, //Outside Bottom Left
	{0x006d, 0x006d, 0x006d, 0x006d, 0x55ad, 0xaabd, 0xfffd, 0x5554}, //Outside Bottom Right
	{0xaa80, 0x0800, 0x4854, 0x1555, 0x1555, 0x4854, 0x0800, 0xaa80}, // ShipRight
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000}, // Bullet
	{0x8040, 0xa050, 0x2874, 0x0a7d, 0x0a7d, 0x2874, 0xa050, 0x8040}, // EnemyRight
	{0x8040, 0xa050, 0x2874, 0x0a7d, 0x0a7d, 0x2874, 0xa050, 0x8040}, // EnemyRight
	{0x8040, 0xa050, 0x2874, 0x0a7d, 0x0a7d, 0x2874, 0xa050, 0x8040} // EnemyRight
};

const unsigned short shipsprite[4][8]={
	{0xaa80, 0x0800, 0x4854, 0x1555, 0x1555, 0x4854, 0x0800, 0xaa80}, // ShipRight
	{0x0140, 0x0550, 0x0550, 0x8552, 0x8142, 0xa96a, 0x8142, 0x8412}, // ShipUp
	{0x02aa, 0x0020, 0x1521, 0x5554, 0x5554, 0x1521, 0x0020, 0x02aa}, // ShipLeft
	{0x8412, 0x8142, 0xa96a, 0x8142, 0x8552, 0x0550, 0x0550, 0x0140} // ShipDown
};

const unsigned short enemysprite[4][8]={
	{0x8040, 0xa050, 0x2874, 0x0a7d, 0x0a7d, 0x2874, 0xa050, 0x8040}, // EnemyRight
	{0x0140, 0x07d0, 0x1ff4, 0x5555, 0x03c0, 0x0ff0, 0x3c3c, 0xf00f}, // EnemyUp
	{0x0102, 0x050a, 0x1d28, 0x7da0, 0x7da0, 0x1d28, 0x050a, 0x0102}, // EnemyLeft
	{0xa00a, 0x2828, 0x0aa0, 0x0280, 0x5555, 0x1ff4, 0x07d0, 0x0140} // EnemyDown
};

const unsigned short bulletsprite[2][8]={
	{0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000}, // Null
	{0x0000, 0x0000, 0x0000, 0x0140, 0x0140, 0x0000, 0x0000, 0x0000} // Bullet
};

enum
{
TileNull = 0,
WallLeft = 1,
WallTop = 2,
WallRight = 3,
WallBottom = 4,
WallTopLeft = 5,
WallTopRight = 6,
WallBottomRight = 7,
WallBottomLeft = 8,
WallOutsideTopLeft = 9,
WallOutsideTopRight = 10,
WallOutsideBottomLeft = 11,
WallOutsideBottomRight = 12,
ShipSprite = 13,
BulletSprite = 14,
EnemySprite = 15
};

// copies a new tile graphic into tile memory.
void CopySpriteTile(u16 * SpriteTiles, u16 TileNumber, u8 AnimNumber)
{
	u8 i;
	u16 * TileRam = TILE_RAM;
	//Our input parameter. NOT a global constant
	u16 * theSpriteAnim = (u16 *) SpriteTiles;

	TileRam += (TileNumber * 8);
	theSpriteAnim += (AnimNumber * 8);

	//We're only copying a single tile!
	for (i = 0; i < 8; i ++)
	{
		TileRam[i] = *theSpriteAnim++;
	}
}

u8 SpriteCollision(T_PLAYERSHIP Sprite1, T_PLAYERSHIP Sprite2)
{
	u8 xCollision;
	u8 yCollision;
	u8 RetVal;
	RetVal=0;
	if (Sprite1.xPosition>=Sprite2.xPosition)
	  xCollision = ((Sprite1.xPosition-Sprite2.xPosition)<8);
	else
	  xCollision = ((Sprite2.xPosition-Sprite1.xPosition)<8);

	if (Sprite1.yPosition>=Sprite2.yPosition)
	  yCollision = ((Sprite1.yPosition-Sprite2.yPosition)<8);
	else
	  yCollision = ((Sprite2.yPosition-Sprite1.yPosition)<8);

	if (xCollision && yCollision)
	{
	  //Collision!
	  RetVal=1;
	}
	return RetVal;
}